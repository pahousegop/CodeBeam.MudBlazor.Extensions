@namespace MudExtensions
@inherits MudComponentBase

<div class="@OuterClass" style="@OuterStylename">
    <a class="absolute mud-barcode-link" href="@(Clickable ? Value : null)" target="@Target">
        @{
            var content = GetCode();
        }
        @if (content != null)
        {
            var viewBoxWidth = @content.ModuleSizeX * content.Columns;
            var viewBoxHeight = @content.ModuleSizeY * content.Rows;

                <svg width="@Width" height="@Height" class="@Class" style="background-color:@BackgroundColor; @Style" viewBox="0 0 @viewBoxWidth @viewBoxHeight">
                @for (int y = 0; y < content.Rows; y++)
                {
                    @for (int x = 0; x < content.Columns; x++)
                    {
                        @if (content[x, y])
                        {
                              <rect class="d-flex align-center justify-center" width="@content.ModuleSizeX" height="@content.ModuleSizeY" style="@($"fill:{Color}; stroke-width:{StrokeWidth}px; stroke:{Color}")"
                                    x="@(x * content.ModuleSizeX)" y="@(y * content.ModuleSizeY)" />
                        }
                    }
                }
                </svg>
        }
        else
        {
                <MudImage Src="@EmptySrc" Height="Height" Width="Width" Class="@Class" Style="@Style" />
        }
        <div class="absolute mud-barcode-child" style="top:50%; left:50%; transform: translate(-50%, -50%)">
            @ChildContent
        </div>
    </a>
</div>