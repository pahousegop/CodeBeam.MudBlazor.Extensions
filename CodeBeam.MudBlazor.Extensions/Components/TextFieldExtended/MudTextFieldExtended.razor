@namespace MudExtensions
@typeparam T
@inherits MudDebouncedInputExtended<T>

<CascadingValue Name="SubscribeToParentForm2" Value="@SubscribeToParentForm2" IsFixed="true">
        <MudInputControl Label="@Label"
                         Variant="@Variant"
                         HelperText="@HelperText"
                         HelperTextOnFocus="@HelperTextOnFocus"
                         CounterText="@GetCounterText()"
                         FullWidth="@FullWidth"
                         Class="@Classname"
                         Error="@HasErrors"
                         ErrorText="@GetErrorText()"
                         ErrorId="@ErrorId"
                         Disabled="@Disabled"
                         Margin="@Margin"
                         Required="@Required"
                         ForId="@FieldId">
            <InputContent>
                <CascadingValue Name="SubscribeToParentForm2" Value="false" IsFixed="true">
                    @if (_mask == null)
                    {
                        <MudInputExtended T="string"
                                      @ref="InputReference"
                                      @attributes="UserAttributes"
                                      Label="@Label"
                                      InputType="@InputType"
                                      InputMode="@InputMode"
                                      Lines="@Lines"
                                      Style="@Style"
                                      Variant="@Variant"
                                      TextUpdateSuppression="@TextUpdateSuppression"
                                      Value="@Text"
                                      ValueChanged="(s) => SetTextAsync(s)"
                                      Placeholder="@Placeholder"
                                      Disabled="@GetDisabledState()"
                                      Underline="@Underline"
                                      ReadOnly="@GetReadOnlyState()"
                                      MaxLength="@MaxLength"
                                      IconSize="@IconSize"
                                      Error="@Error"
                                      ErrorId="@ErrorId"
                                      Immediate="@Immediate"
                                      Margin="@Margin"
                                      OnInput="@OnInput"
                                      OnBlur="@OnBlurredAsync"
                                      OnKeyDown="@InvokeKeyDownAsync"
                                      OnInternalInputChanged="OnChanged"
                                      OnKeyUp="@InvokeKeyUpAsync"
                                      KeyDownPreventDefault="KeyDownPreventDefault"
                                      KeyUpPreventDefault="KeyUpPreventDefault"
                                      HideSpinButtons="true"
                                      Clearable="@Clearable"
                                      OnClearButtonClick="@OnClearButtonClick"
                                      Pattern="@Pattern"
                                      AutoSize="AutoSize"
                                      ShrinkLabel="@(AdornmentStart!= null || ShrinkLabel)"
                                      Typo="@Typo"
                                      ShowVisualiser="@(DataVisualiser != null && ShowVisualiser)"
                                      DataVisualiserStyle="@(DataVisualiser != null ? "min-height: 1.1876em" : null)">

                            <DataVisualiser>
                                @DataVisualiser
                            </DataVisualiser>

                            <AdornmentStart>
                                @AdornmentStart
                            </AdornmentStart>

                            <AdornmentEnd>
                                @AdornmentEnd
                            </AdornmentEnd>

                        </MudInputExtended>
                    }
                    else
                    {
                        <MudMask @ref="_maskReference"
                             @attributes="UserAttributes"
                             Label="@Label"
                             Mask="@_mask"
                             InputType="@InputType"
                             InputMode="@InputMode"
                             Lines="@Lines"
                             Style="@Style"
                             Variant="@Variant"
                             Typo="Typo"
                             TextUpdateSuppression="@TextUpdateSuppression"
                             Value="@Text"
                             ValueChanged="OnMaskedValueChanged"
                             Placeholder="@Placeholder"
                             Disabled=@GetDisabledState()
                             Underline="@Underline"
                             ReadOnly="@GetReadOnlyState()"
                             MaxLength="@MaxLength"
                             Adornment="@Adornment"
                             AdornmentText="@AdornmentText"
                             AdornmentIcon="@AdornmentIcon"
                             AdornmentColor="@AdornmentColor"
                             AdornmentAriaLabel="@AdornmentAriaLabel"
                             IconSize="@IconSize"
                             OnAdornmentClick="@OnAdornmentClick"
                             Error="@Error"
                             ErrorId="@ErrorId"
                             HelperText="@HelperText"
                             Immediate="@Immediate"
                             Margin="@Margin" OnBlur="@OnBlurredAsync"
                             OnClearButtonClick="@OnClearButtonClick"
                             ShrinkLabel="@ShrinkLabel"
                             Required="@Required" />
                    }
                </CascadingValue>
            </InputContent>
    </MudInputControl>
</CascadingValue>